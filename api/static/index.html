<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clasificator de Companii - Insurance Taxonomy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            width: 100%;
            padding: 40px;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2em;
            text-align: center;
        }

        .subtitle {
            color: #666;
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 1.05em;
        }

        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
            min-height: 200px;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .button-container {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        button {
            flex: 1;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .results {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-top: 25px;
            display: none;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .results.show {
            display: block;
        }

        .results h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .prediction-item {
            background: white;
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 15px;
            animation: popIn 0.3s ease-out;
        }

        @keyframes popIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .prediction-rank {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1em;
            flex-shrink: 0;
        }

        .prediction-label {
            color: #333;
            font-size: 1.05em;
            flex: 1;
        }

        .error {
            background: #fee;
            border-left-color: #f44336;
            color: #c62828;
            padding: 15px 20px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #f44336;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
            font-size: 1.1em;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .example-text {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .example-link {
            color: #667eea;
            cursor: pointer;
            text-decoration: underline;
        }

        .example-link:hover {
            color: #764ba2;
        }

        @media (max-width: 600px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 1.5em;
            }

            .button-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üè¢ Clasificator de Companii</h1>
        <p class="subtitle">Introduce»õi informa»õii despre o companie pentru a ob»õine cele mai probabile categorii din taxonomia de asigurƒÉri</p>

        <div class="form-group">
            <label for="companyText">Descrierea companiei:</label>
            <textarea
                id="companyText"
                placeholder="Introduce»õi descrierea companiei, tag-uri business, sector, categorie, etc.&#10;&#10;Exemplu:&#10;Description: Welchcivils is a civil engineering and construction company...&#10;Business Tags: Construction Services, Multi-utilities...&#10;Sector: Services&#10;Category: Civil Engineering Services"
            ></textarea>
            <p class="example-text">
                Nu »ôti»õi ce sƒÉ scrie»õi?
                <span class="example-link" onclick="loadExample()">√éncƒÉrca»õi un exemplu</span>
            </p>
        </div>

        <div class="button-container">
            <button class="btn-primary" onclick="classifyCompany()" id="classifyBtn">
                üîç ClasificƒÉ compania
            </button>
            <button class="btn-secondary" onclick="clearForm()">
                üóëÔ∏è »òterge tot
            </button>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Se proceseazƒÉ... VƒÉ rugƒÉm a»ôtepta»õi.</p>
        </div>

        <div class="results" id="results">
            <h2>üìä Rezultate - Top 3 Predic»õii:</h2>
            <div id="predictions"></div>
        </div>

        <div class="error" id="error" style="display: none;"></div>
    </div>

    <script>
        const API_URL = 'http://localhost:5000';

        function loadExample() {
            const exampleText = `This is a detailed company profile Description: Welchcivils is a civil engineering and construction company that specializes in designing and building utility network connections across the UK. They offer multi-utility solutions that combine electricity, gas, water, and fibre optic installation into a single contract. Their design engineer teams are capable of designing electricity, water and gas networks from existing network connection points to meter locations at the development, as well as project management of reinforcements and diversions. They provide custom connection solutions that take into account any existing assets, maximize the usage of every trench, and meet project deadlines. Welchcivils has considerable expertise installing gas and electricity connections in a variety of market categories, including residential, commercial, and industrial projects, as well. Business Tags: Construction Services, Multi-utilities, Utility Network Connections Design and Construction, Water Connection Installation, Multi-utility Connections, Fiber Optic Installation Sector: Services Category: Civil Engineering Services Niche: Other Heavy and Civil Engineering Construction`;

            document.getElementById('companyText').value = exampleText;
        }

        function clearForm() {
            document.getElementById('companyText').value = '';
            document.getElementById('results').classList.remove('show');
            document.getElementById('error').style.display = 'none';
        }

        async function classifyCompany() {
            const text = document.getElementById('companyText').value.trim();

            // Hide previous results
            document.getElementById('results').classList.remove('show');
            document.getElementById('error').style.display = 'none';

            if (!text) {
                showError('VƒÉ rugƒÉm sƒÉ introduce»õi o descriere a companiei.');
                return;
            }

            // Show loading
            document.getElementById('loading').classList.add('show');
            document.getElementById('classifyBtn').disabled = true;

            try {
                const response = await fetch(`${API_URL}/classify`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ text: text })
                });

                const data = await response.json();

                if (data.success) {
                    displayResults(data.predictions);
                } else {
                    showError(data.error || 'A apƒÉrut o eroare la clasificare.');
                }
            } catch (error) {
                showError('Eroare de conexiune: ' + error.message + '. Asigura»õi-vƒÉ cƒÉ serverul este pornit.');
            } finally {
                document.getElementById('loading').classList.remove('show');
                document.getElementById('classifyBtn').disabled = false;
            }
        }

        function displayResults(predictions) {
            const predictionsDiv = document.getElementById('predictions');
            predictionsDiv.innerHTML = '';

            predictions.forEach((label, index) => {
                const item = document.createElement('div');
                item.className = 'prediction-item';
                item.style.animationDelay = `${index * 0.1}s`;

                item.innerHTML = `
                    <div class="prediction-rank">${index + 1}</div>
                    <div class="prediction-label">${label}</div>
                `;

                predictionsDiv.appendChild(item);
            });

            document.getElementById('results').classList.add('show');
        }

        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        // Allow Enter + Ctrl to submit
        document.getElementById('companyText').addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                classifyCompany();
            }
        });
    </script>
</body>
</html>

